

<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Contributors guide &#8212; DAGMC</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/default.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Developer’s theory guide" href="devtheory.html" />
    <link rel="prev" title="Contribute" href="index.html" /> 
  </head><body> 
<div id="page-div" class="page">
<div id="header">
    <a id="uwhome" href="http://www.wisc.edu"><img src="../_static/images/wordmark.gif" alt="University of Wisconsin–Madison" width="260" height="11" /></a> 
    <a id="crest" href="http://www.wisc.edu"><img src="../_static/images/crest.png" alt="" width="70" height="106" /></a>
    <h1 id="siteTitle"><a href="../index.html"><img src="../_static/images/logo.png" alt="" height="50x" /><span>DAGMC</span></a></h1>
    <div id="tagline"><span>Direct Accelerated Geometry Monte Carlo Toolkit</span></div>
    <ul id="globalnav">
      <li id="uwsearch"><a href="http://www.wisc.edu/search/">UW Search</a></li>
      <li><a href="http://cnerg.github.com">CNERG</a></li>
      <li><a href="http://my.wisc.edu">My UW</a></li>
      <li><a href="http://map.wisc.edu">Map</a></li>
      <li id="last_tool"><a href="http://www.today.wisc.edu">Calendar</a></li>
    </ul>
    <form role="search" action="../search.html" method="get" id="cse-search-box">
      <div>
      <label class="screen-reader-text" for="q">Search for:</label>
      <input type="text" id="q" name="q" value="Enter keywords here...." />
      <input type="submit" id="sa" value="Search" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
      </div>
    </form>
<script type="text/javascript">$('#searchbox').show(0);</script>
</div>

    <div id="nav" class="main-menu-container">
      <ul id="menu-main" class="sf-menu">
        <li class="menu-item"><a href="http://svalinn.github.io">Svalinn</a></li>
        <li class="menu-item"><a href="../index.html">DAGMC</a></li>
        <li class="menu-item" style="margin-right: 10px">
          <a href="index.html" title="Contribute"
             accesskey="P">previous</a>
          </li>
        <li class="menu-item" >
          <a href="devtheory.html" title="Developer’s theory guide"
             accesskey="N">next</a>
          </li>
        <li class="menu-item" >
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a>
          </li>
          <li class="menu-item"><a href="index.html" accesskey="U">Contribute</a></li> 
      </ul>
    </div>
  <div id="c_container"> 
<div id="sidebar">
 <div id="sidebar_section"><ul>
<li><a class="reference internal" href="#">Contributors guide</a><ul>
<li><a class="reference internal" href="#contributing">Contributing</a><ul>
<li><a class="reference internal" href="#forking">Forking</a></li>
<li><a class="reference internal" href="#cloning">Cloning</a></li>
<li><a class="reference internal" href="#branching">Branching</a></li>
<li><a class="reference internal" href="#pushing">Pushing</a></li>
<li><a class="reference internal" href="#pull-requesting">Pull requesting</a></li>
<li><a class="reference internal" href="#refreshing-your-branch">Refreshing your branch</a></li>
</ul>
</li>
<li><a class="reference internal" href="#testing-and-continuous-integration">Testing and continuous integration</a></li>
<li><a class="reference internal" href="#general-style">General style</a></li>
<li><a class="reference internal" href="#c-style">C++ Style</a></li>
<li><a class="reference internal" href="#bug-reporting">Bug reporting</a></li>
</ul>
</li>
</ul>
 </div>
</div> 
    <div id="content" class="inline-block">
          <div class="post">
            
  <section id="contributors-guide">
<h1>Contributors guide<a class="headerlink" href="#contributors-guide" title="Permalink to this heading">¶</a></h1>
<p>DAGMC is an open-source project that facilitates the running of CAD-based
particle transport problems.</p>
<section id="contributing">
<h2>Contributing<a class="headerlink" href="#contributing" title="Permalink to this heading">¶</a></h2>
<p>Contributing to the DAGMC project is very straightforward. DAGMC is hosted on
<a class="reference external" href="https://github.com/svalinn/DAGMC">Github</a> where issues and pull requests are discussed and
merged. We use the git version control system, which could be the most
unfamiliar aspect of contributing for most people. The general workflow to
contribute to DAGMC and many other open source projects involves steps like
this:</p>
<a class="reference internal image-reference" href="../_images/workflow.png"><img alt="Image showing the github workflow" src="../_images/workflow.png" style="width: 600px; height: 300px;" /></a>
<p>There are 6 main steps:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>Forking</p></li>
<li><p>Cloning</p></li>
<li><p>Branching</p></li>
<li><p>Pushing</p></li>
<li><p>Pull requesting</p></li>
<li><p>Refreshing your branch</p></li>
</ol>
</div></blockquote>
<p>These stages are outlined below.</p>
<section id="forking">
<h3>Forking<a class="headerlink" href="#forking" title="Permalink to this heading">¶</a></h3>
<p>To start, the repository must be forked. The easiest way to do this is to click
on the “Fork” button from the <cite>svalinn/DAGMC</cite> branch shown below.</p>
<a class="reference internal image-reference" href="../_images/workflow_fork.png"><img alt="Image showing how to fork a repo" src="../_images/workflow_fork.png" style="width: 600px; height: 150px;" /></a>
<p>This fork will be an exact snapshot of the <cite>svalinn/DAGMC</cite> repository at the
time you clicked “Fork”. Any new features that you wish to develop should be
based from the develop branch of this repository, unless you know exactly what
you’re doing.</p>
</section>
<section id="cloning">
<h3>Cloning<a class="headerlink" href="#cloning" title="Permalink to this heading">¶</a></h3>
<p>You should now clone your fork of this repository to your local machine.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ git clone https://github.com/&lt;githubusername&gt;/DAGMC
$ cd DAGMC
</pre></div>
</div>
<p>It is prudent to also add the main svalinn repository as another remote source.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ git add remote upstream https://github.com/svalinn/DAGMC
</pre></div>
</div>
</section>
<section id="branching">
<h3>Branching<a class="headerlink" href="#branching" title="Permalink to this heading">¶</a></h3>
<p>The base level of the repository contains folders for each of the supported
Monte Carlo codes, the tools directory, and our amalgamated PyNE build. First,
you need to checkout a new branch in which to keep your changes.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ git checkout -b &quot;my_feature_branch&quot;
</pre></div>
</div>
<p>To insert a new feature, edit an existing file or add new ones as required.
Remember to update the <code class="docutils literal notranslate"><span class="pre">CMakeList.txt</span></code> files as required. Your new changes
then need to be added, commited, and pushed.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ git add &lt;files needed to add&gt;
$ git commit -m &quot;This is a message that describes why we need these changes&quot;
</pre></div>
</div>
</section>
<section id="pushing">
<h3>Pushing<a class="headerlink" href="#pushing" title="Permalink to this heading">¶</a></h3>
<p>Now that your changes are commited, push the changes to your remote branch in
your clone of DAGMC.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ git push origin my_feature_branch
</pre></div>
</div>
<p>Before pushing, your local feature branch is the only place this changeset is
stored. Pushing is required in order to let your remote repository know of these
changes.</p>
</section>
<section id="pull-requesting">
<h3>Pull requesting<a class="headerlink" href="#pull-requesting" title="Permalink to this heading">¶</a></h3>
<p>Having succesfully pushed your changes to your remote fork, you can carry on and
make more changes, or create a pull request from the changes you have made. If
you immediately go to your fork on Github, you should see a message offering to
create a pull request with that branch to <cite>svalinn/DAGMC:develop</cite>. If you click
this message you can edit and submit the pull request. If you’ve waited a few
tens of minutes between pushing and going to Github, you may need to create a
pull request manually. Your pull request will launch our continuous integration
tests, and after a short while, your changes will either pass all the tests or
fail some of them. The status of the tests is shown at the bottom of the
pull request.</p>
<a class="reference internal image-reference" href="../_images/github_testing.png"><img alt="Image showing when testing is launched." src="../_images/github_testing.png" style="width: 600px; height: 400px;" /></a>
<p>All pull requests must be accompanied by a restructured text (.rst) file in the
<cite>news</cite> directory. The file should follow the template in <cite>news/TEMPLATE.rst</cite> and
it should explain the changes made by the pull request in detail.</p>
<p>When testing passes and another developer has reviewed your pull request, your
changes will then be merged into the develop branch.</p>
</section>
<section id="refreshing-your-branch">
<h3>Refreshing your branch<a class="headerlink" href="#refreshing-your-branch" title="Permalink to this heading">¶</a></h3>
<p>Once your pull request has been integrated into the mainline DAGMC develop
branch successfully, your clone and your local repository’s develop branch will
reflect the pre-pull request state of DAGMC. In order for your personal clones
and repositories to be updated, you must first pull the changes into your local
clone.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ git checkout develop #remember to checkout the develop branch!
$ git pull upstream develop
</pre></div>
</div>
<p>Now your local clone of the repository has an up-to-date develop branch, but you
still need to refresh your Github branch, and now you must push the develop
changes to it.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ git push origin develop
</pre></div>
</div>
</section>
</section>
<section id="testing-and-continuous-integration">
<h2>Testing and continuous integration<a class="headerlink" href="#testing-and-continuous-integration" title="Permalink to this heading">¶</a></h2>
<p>We use the <a class="reference external" href="https://code.google.com/p/googletest">Google Test</a> gtest libraries to control testing of
our code, and we use the <a class="reference external" href="https://circleci.com/gh/svalinn/DAGMC">CircleCI</a> continuous integration system to test all
changes to the code. When you add features to the codebase, tests should always
be added which prove that the capabilities that have been added work.</p>
<p>When a developer makes a pull request on GitHub, CircleCI detects it and launches
the build as specified in the <code class="docutils literal notranslate"><span class="pre">.circleci/config.yml</span></code> file. CircleCI pulls your feature
branch, the MOAB libraries, HDF5, etc. as required and then launches the tests.
Each test is run in succession and failure is reported if any dependency fails
to build or if any test fails. An example of a CircleCI report is shown below.</p>
<a class="reference internal image-reference" href="../_images/circleci_example.png"><img alt="Image showing the status of the an example CircleCI run" src="../_images/circleci_example.png" style="width: 600px; height: 300px;" /></a>
<p>Once the testing is complete and your changes have been verified as not breaking
any of the existing capabilities, a reviewer will check your pull request over
and may suggest some modifications and then will approve or reject your pull
request.</p>
</section>
<section id="general-style">
<h2>General style<a class="headerlink" href="#general-style" title="Permalink to this heading">¶</a></h2>
<p>Explicit namespacing is preferred, so rather than using the
<cite>using namespace xxx</cite> command, you should prefix the variable with the class
name. For example,</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>pyne::Material new_material; // this is a new material
</pre></div>
</div>
<p>is preferred over</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>using namepspace pyne;
Material new_material; // this is a new material
</pre></div>
</div>
<p>This is to save developers poring over dozens of different header files trying
to isolate exactly which type is being referenced.</p>
</section>
<section id="c-style">
<h2>C++ Style<a class="headerlink" href="#c-style" title="Permalink to this heading">¶</a></h2>
<p>DAGMC conforms to the Google C++ style guide. We use the <a class="reference external" href="http://astyle.sourceforge.net">Astyle</a> code formatter
to make developers’ lives easier. Here is how to install Astyle on Ubuntu 18.04:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ sudo apt install astyle
</pre></div>
</div>
<p>If you are using a distribution of Linux other than Ubuntu 18.04, you may need
to acquire astyle manually. This is because DAGMC requires astyle version 3, and
not all distributions have easy access to astyle 3. This is the recommended way
to get astyle on other versions of Ubuntu, i.e. 16.04:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ wget https://launchpad.net/ubuntu/+source/astyle/3.1-1ubuntu2/+build/14532685/+files/astyle_3.1-1ubuntu2_amd64.deb
$ sudo dpkg -i astyle_3.1-1ubuntu2_amd64.deb
</pre></div>
</div>
<p>When you have added all the features you want to add, the style guide formatter
should be run from the base level directory of the DAGMC repository like this:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ astyle --options=astyle_google.ini \
         --exclude=gtest \
         --exclude=src/mcnp/mcnp5 \
         --exclude=src/mcnp/mcnp6 \
         --ignore-exclude-errors \
         --recursive \
         --verbose \
         --formatted \
         &quot;*.cc&quot; &quot;*.cpp&quot; &quot;*.h&quot; &quot;*.hh&quot; &quot;*.hpp&quot;
</pre></div>
</div>
<p>Then commit the changes to your branch. Avoid commiting code only changes and
then commiting C++ formatter changes, as this makes the changeset more difficult
to review.</p>
</section>
<section id="bug-reporting">
<h2>Bug reporting<a class="headerlink" href="#bug-reporting" title="Permalink to this heading">¶</a></h2>
<p>If you find a bug, raise an issue on the main <a class="reference external" href="https://github.com/svalinn/DAGMC/issues">svalinn/DAGMC</a>
Github site. If you think you can tackle the issue yourself then please do so,
then pull request your changes.</p>
</section>
</section>


          </div>
      </div>

    </div>
</div>
    <div id="footer">
      <p>
        &copy; Copyright 2012-2020, The UW CNERG Team.
      </p>
      <p>
      Last updated on Aug 02, 2022.
      </p>
      <p>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 5.0.1.
      </p>
    </div>
  </body>
</html>