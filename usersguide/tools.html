

<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>DAGMC tools &#8212; DAGMC</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/default.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Post-processing" href="postprocessing.html" />
    <link rel="prev" title="DAGMC unstructured mesh tallies" href="tally.html" /> 
  </head><body> 
<div id="page-div" class="page">
<div id="header">
    <a id="uwhome" href="http://www.wisc.edu"><img src="../_static/images/wordmark.gif" alt="University of Wisconsin–Madison" width="260" height="11" /></a> 
    <a id="crest" href="http://www.wisc.edu"><img src="../_static/images/crest.png" alt="" width="70" height="106" /></a>
    <h1 id="siteTitle"><a href="../index.html"><img src="../_static/images/logo.png" alt="" height="50x" /><span>DAGMC</span></a></h1>
    <div id="tagline"><span>Direct Accelerated Geometry Monte Carlo Toolkit</span></div>
    <ul id="globalnav">
      <li id="uwsearch"><a href="http://www.wisc.edu/search/">UW Search</a></li>
      <li><a href="http://cnerg.github.com">CNERG</a></li>
      <li><a href="http://my.wisc.edu">My UW</a></li>
      <li><a href="http://map.wisc.edu">Map</a></li>
      <li id="last_tool"><a href="http://www.today.wisc.edu">Calendar</a></li>
    </ul>
    <form role="search" action="../search.html" method="get" id="cse-search-box">
      <div>
      <label class="screen-reader-text" for="q">Search for:</label>
      <input type="text" id="q" name="q" value="Enter keywords here...." />
      <input type="submit" id="sa" value="Search" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
      </div>
    </form>
<script type="text/javascript">$('#searchbox').show(0);</script>
</div>

    <div id="nav" class="main-menu-container">
      <ul id="menu-main" class="sf-menu">
        <li class="menu-item"><a href="http://svalinn.github.io">Svalinn</a></li>
        <li class="menu-item"><a href="../index.html">DAGMC</a></li>
        <li class="menu-item" style="margin-right: 10px">
          <a href="tally.html" title="DAGMC unstructured mesh tallies"
             accesskey="P">previous</a>
          </li>
        <li class="menu-item" >
          <a href="postprocessing.html" title="Post-processing"
             accesskey="N">next</a>
          </li>
        <li class="menu-item" >
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a>
          </li>
          <li class="menu-item"><a href="index.html" accesskey="U">User’s guide</a></li> 
      </ul>
    </div>
  <div id="c_container"> 
<div id="sidebar">
 <div id="sidebar_section"><ul>
<li><a class="reference internal" href="#">DAGMC tools</a><ul>
<li><a class="reference internal" href="#make-watertight">make_watertight</a></li>
<li><a class="reference internal" href="#check-watertight">check_watertight</a></li>
<li><a class="reference internal" href="#mbconvert">mbconvert</a></li>
<li><a class="reference internal" href="#mklostvis">mklostvis</a></li>
</ul>
</li>
</ul>
 </div>
</div> 
    <div id="content" class="inline-block">
          <div class="post">
            
  <section id="dagmc-tools">
<h1>DAGMC tools<a class="headerlink" href="#dagmc-tools" title="Permalink to this heading">¶</a></h1>
<p>The DAGMC infrastructure has a number of tools that are used to process, fix,
diagnose and repair processed models. This document serves to better inform and
educate what those tools are and how to use them.</p>
<section id="make-watertight">
<span id="id1"></span><h2>make_watertight<a class="headerlink" href="#make-watertight" title="Permalink to this heading">¶</a></h2>
<p>A model is considered watertight if the faceting of all topologically linked
surfaces are coincident. Models produced by Cubit are not guaranteed to
be watertight, and as a general rule, the more complicated the model, the less
likely it is to be completely watertight.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">make_watertight</span></code> tool aims to fix any watertightness issues in a model by
using faceted curve information to seal triangle facets that meet on the same
curve. An example of its use is shown here: the red lines show the geometry
before <code class="docutils literal notranslate"><span class="pre">make_watertight</span></code> and the black lines show the geometry after its use.</p>
<a class="reference internal image-reference" href="../_images/watertight.png"><img alt="An example of the use of make_watertight: the red lines show the geometry before ``make_watertight`` and the black lines show the geometry after its use." src="../_images/watertight.png" style="width: 600px; height: 500px;" /></a>
<p><code class="docutils literal notranslate"><span class="pre">make_watertight</span></code> can be run with:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ make_watertight &lt;filename&gt;
</pre></div>
</div>
<p>The product will be a file named, <cite>filename_zip.h5m</cite>, and a summary is provided
of what operations were done to seal the model.</p>
</section>
<section id="check-watertight">
<h2>check_watertight<a class="headerlink" href="#check-watertight" title="Permalink to this heading">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">check_watertight</span></code> tool can be used to find out how watertight a
given model is. It should be used as a post-processing step after
<code class="docutils literal notranslate"><span class="pre">make_watertight</span></code> to verify that the model has been made more watertight.</p>
<p><code class="docutils literal notranslate"><span class="pre">check_watertight</span></code> can be run  with:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ check_watertight &lt;filename&gt;
</pre></div>
</div>
<p>Both <code class="docutils literal notranslate"><span class="pre">make_watertight``and</span> <span class="pre">``check_watertight</span></code> are built during the main DAGMC
build procedure and can be found in DAGMC’s <cite>bin</cite> directory.</p>
</section>
<section id="mbconvert">
<h2>mbconvert<a class="headerlink" href="#mbconvert" title="Permalink to this heading">¶</a></h2>
<p>The mbconvert tool is a MOAB tool used to translate MOAB meshes into some
text based format. It is useful for converting DAGMC models into some other
visualization form for result post processing, such as stl files for viewing in
Visit or Paraview. To run mbconvert input option, input filename and output
filename are specificed:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ mbconvert &lt;input_filename&gt; &lt;output_filename&gt; [options]
</pre></div>
</div>
<p>The options which control mbconvert are:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>-v  &lt;int&gt; - extract a specific volume or range of volumes
-s  &lt;int&gt; - extract a specific surface or range of surfaces
-c  &lt;int&gt; - extract a specific curve or range of curves
-1  - extract edges only
-2  - extract two dimensional entities only e.g. Tri, Quad, etc.
-3  - extract three dimensional entities only, e.g. tet, hex, etc.
-h  - print help
-f  - list available read/write formats
</pre></div>
</div>
</section>
<section id="mklostvis">
<h2>mklostvis<a class="headerlink" href="#mklostvis" title="Permalink to this heading">¶</a></h2>
<p>Sometimes either poor quality CAD, incorrect imprinting &amp; merging or overlapping
volumes; particles are regarded as lost by the Monte Carlo code. It is therefore
necessary to be able to examine where the particles were lost and in which
direction they were travelling in. The tool <a class="reference external" href="https://github.com/svalinn/meshtools/tree/master/lostparticles">mklostvis</a> is designed for this
purpose, reading the output of the MCNP lost particle information and producing
a Cubit or journal file which will draw the lost particles as vertices and their
directions as curves. The script can be run with:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ mklostvis.pl [mcnp_output_filename] [vector_length] &gt; [journal_file_name]
</pre></div>
</div>
<p>The produced Cubit journal file can be “played”, and will plot these lost
particles on top of whatever geometry is loaded into your Cubit session, like
that shown below.</p>
<a class="reference internal image-reference" href="../_images/lost_p.png"><img alt="Image showing lost particle information" src="../_images/lost_p.png" style="width: 300px; height: 300px;" /></a>
<a class="reference internal image-reference" href="../_images/lost_p_zoom.png"><img alt="Image showing lost particle information zoomed in" src="../_images/lost_p_zoom.png" style="width: 300px; height: 300px;" /></a>
</section>
</section>


          </div>
      </div>

    </div>
</div>
    <div id="footer">
      <p>
        &copy; Copyright 2012-2020, The UW CNERG Team.
      </p>
      <p>
      Last updated on Aug 02, 2022.
      </p>
      <p>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 5.0.1.
      </p>
    </div>
  </body>
</html>