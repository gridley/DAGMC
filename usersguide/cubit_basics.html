

<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Cubit basics &#8212; DAGMC</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/default.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="University of Wisconsin Unified Workflow (UWUW)" href="uw2.html" />
    <link rel="prev" title="User’s guide" href="index.html" /> 
  </head><body> 
<div id="page-div" class="page">
<div id="header">
    <a id="uwhome" href="http://www.wisc.edu"><img src="../_static/images/wordmark.gif" alt="University of Wisconsin–Madison" width="260" height="11" /></a> 
    <a id="crest" href="http://www.wisc.edu"><img src="../_static/images/crest.png" alt="" width="70" height="106" /></a>
    <h1 id="siteTitle"><a href="../index.html"><img src="../_static/images/logo.png" alt="" height="50x" /><span>DAGMC</span></a></h1>
    <div id="tagline"><span>Direct Accelerated Geometry Monte Carlo Toolkit</span></div>
    <ul id="globalnav">
      <li id="uwsearch"><a href="http://www.wisc.edu/search/">UW Search</a></li>
      <li><a href="http://cnerg.github.com">CNERG</a></li>
      <li><a href="http://my.wisc.edu">My UW</a></li>
      <li><a href="http://map.wisc.edu">Map</a></li>
      <li id="last_tool"><a href="http://www.today.wisc.edu">Calendar</a></li>
    </ul>
    <form role="search" action="../search.html" method="get" id="cse-search-box">
      <div>
      <label class="screen-reader-text" for="q">Search for:</label>
      <input type="text" id="q" name="q" value="Enter keywords here...." />
      <input type="submit" id="sa" value="Search" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
      </div>
    </form>
<script type="text/javascript">$('#searchbox').show(0);</script>
</div>

    <div id="nav" class="main-menu-container">
      <ul id="menu-main" class="sf-menu">
        <li class="menu-item"><a href="http://svalinn.github.io">Svalinn</a></li>
        <li class="menu-item"><a href="../index.html">DAGMC</a></li>
        <li class="menu-item" style="margin-right: 10px">
          <a href="index.html" title="User’s guide"
             accesskey="P">previous</a>
          </li>
        <li class="menu-item" >
          <a href="uw2.html" title="University of Wisconsin Unified Workflow (UWUW)"
             accesskey="N">next</a>
          </li>
        <li class="menu-item" >
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a>
          </li>
          <li class="menu-item"><a href="index.html" accesskey="U">User’s guide</a></li> 
      </ul>
    </div>
  <div id="c_container"> 
<div id="sidebar">
 <div id="sidebar_section"><ul>
<li><a class="reference internal" href="#">Cubit basics</a><ul>
<li><a class="reference internal" href="#pre-processing-solid-models-using-cubit">Pre-processing solid models using Cubit</a><ul>
<li><a class="reference internal" href="#importing-the-solid-model">Importing the solid model</a></li>
<li><a class="reference internal" href="#imprint-and-merge">Imprint and merge</a></li>
<li><a class="reference internal" href="#grouping-volumes-and-surfaces">Grouping volumes and surfaces</a></li>
<li><a class="reference internal" href="#production-of-the-dagmc-geometry">Production of the DAGMC geometry</a></li>
</ul>
</li>
<li><a class="reference internal" href="#roadmap-for-the-future">Roadmap for the future</a></li>
</ul>
</li>
</ul>
 </div>
</div> 
    <div id="content" class="inline-block">
          <div class="post">
            
  <section id="cubit-basics">
<h1>Cubit basics<a class="headerlink" href="#cubit-basics" title="Permalink to this heading">¶</a></h1>
<section id="pre-processing-solid-models-using-cubit">
<h2>Pre-processing solid models using Cubit<a class="headerlink" href="#pre-processing-solid-models-using-cubit" title="Permalink to this heading">¶</a></h2>
<p>This section focuses on steps that are independent of the Monte Carlo code used
for analysis. Additional steps for the unified workflow, <a class="reference external" href="uw2.html">UW2</a>, or
<a class="reference external" href="codes/index.html">Monte Carlo code-specific workflows</a> may be followed as
needed.</p>
<section id="importing-the-solid-model">
<h3>Importing the solid model<a class="headerlink" href="#importing-the-solid-model" title="Permalink to this heading">¶</a></h3>
<p>The first step in Cubit is to import the generated solid model. Depending
on the complexity of the model, this step can take several seconds up to a half
an hour. As an initial user, it is recommend to start with simple models and
geometries to obtain a better understanding of Cubit.</p>
</section>
<section id="imprint-and-merge">
<h3>Imprint and merge<a class="headerlink" href="#imprint-and-merge" title="Permalink to this heading">¶</a></h3>
<p>For a DAGMC based analysis to work optimally, all of the surfaces must be
imprinted and merged. Imprinting creates a common surface interface between
touching volumes. Merging then takes the touching surfaces and makes them into
one surface. The imprint operation is shown below.</p>
<a class="reference internal image-reference" href="../_images/imprint_operation.png"><img alt="Imprint operations, results in the creation of additional surfaces." src="../_images/imprint_operation.png" style="width: 600px; height: 200px;" /></a>
<p>To imprint, issue the following command:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>CUBIT&gt; imprint body all
</pre></div>
</div>
<p>Should the imprint be successful, then the next step is to merge the geometry. A
schematic of what the merge operation achieves is shown below.</p>
<a class="reference internal image-reference" href="../_images/merge_operation.png"><img alt="Merge operations, results in the removal of identical surfaces." src="../_images/merge_operation.png" style="width: 600px; height: 250px;" /></a>
<p>Sometimes it may be important to specify a merge tolerance. To set the tolerance
and merge, issue the following commands:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>CUBIT&gt; merge tol 5e-7
CUBIT&gt; merge all
</pre></div>
</div>
<p>This process can be very time consuming. For large models of several thousand
volumes, the imprint and merge steps can take several hours. However, for small
geometries (on the order of 100 volumes) the process is rather quick.</p>
</section>
<section id="grouping-volumes-and-surfaces">
<span id="grouping-basics"></span><h3>Grouping volumes and surfaces<a class="headerlink" href="#grouping-volumes-and-surfaces" title="Permalink to this heading">¶</a></h3>
<p>A DAGMC-based analysis allows a number of attributes of the geometry to be
defined within the geometry file. These characteristics generally relate to the
physical behavior of the volume, for example its material definition or boundary
conditions.</p>
<p>Before the discussion of specific attributes, the practice of “grouping” needs
to be explained. A group is essentially a collection of volumes or surfaces that
share a common attribute; the practical usage of “grouping” will be explained in
the next section.</p>
<p>The general format for creating/adding volumes to a group is:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>CUBIT&gt; group &quot;group.name&quot; add vol/surf ...
</pre></div>
</div>
<p>For example, to create a group called “moderator” containing volumes 5, 6, 7,
and 10, the following command would be used:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>CUBIT&gt; group &quot;moderator&quot; add vol 5 to 8 10
</pre></div>
</div>
<p>Another example, shows that groups don’t have to just contain volumes, but can
contain surfaces too. Below the group “shield.boundary” is created with surfaces
16 and 37:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>CUBIT&gt; group &quot;shield.boundary&quot; add surf 16 37
</pre></div>
</div>
<p>Due to the importance of using the <code class="docutils literal notranslate"><span class="pre">group</span></code> command reading the
<a class="reference external" href="https://cubit.sandia.gov/public/15.2/help_manual/WebHelp/cubithelp.htm">CUBIT manual</a>
section on its full usage is highly recommended.</p>
</section>
<section id="production-of-the-dagmc-geometry">
<span id="geom-production"></span><h3>Production of the DAGMC geometry<a class="headerlink" href="#production-of-the-dagmc-geometry" title="Permalink to this heading">¶</a></h3>
<p>Now that the geometry is ready for DAGMC we must export it. Using the
Cubit plugin make this very straightforward, assuming that the user has
proceeded through the previous steps then all one must do is use the export
dagmc command.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>CUBIT&gt; export dagmc &lt;filename&gt; [faceting_tolerance &lt;faceting tolerance&gt;]
                               [length_tolerance &lt;length tolerance&gt;]
                               [normal_tolerance &lt;normal tolerance&gt;]
                               [verbose] [fatal_on_curves]
</pre></div>
</div>
<p>The meaning of these different options are described below</p>
<dl class="simple">
<dt><strong>Faceting Tolerance</strong> -  Specifies how far a facet is allowed</dt><dd><p>to be from the CAD representation of
a surface in the faceting algorithm.</p>
</dd>
<dt><strong>Lenth Tolerance</strong> -     Specifies the maximum allowed length</dt><dd><p>of a facet edge.</p>
</dd>
<dt><strong>Normal Tolerance</strong> -    Specifies the maximum allowed change</dt><dd><p>in angle between then normal vector
of two adjacent facets.</p>
</dd>
</dl>
<p>For example to produce a file called, geometry.h5m with faceting tolerances and
length tolerances of 1.0e-4 cm and 5.0 cm respectively</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>CUBIT&gt; export dagmc geometry.h5m faceting_tolerance 1.e-4 length_tolerance 5.0
</pre></div>
</div>
<p>The time taken to perform this step depends upon the complexity of the model, it
could  take seconds for very simple models to hours for very complex models. It
is also possible that faceting artifacts or failures could occur at this point,
so monitor the output of this command in the Cubit command line. If
issues due occurs, these should be addressed following the workflow listed
above.</p>
<p>Where faceting_tolerance, normal_tolerance, and length tolerance are optional
arguments. For example, to export the currently loaded file to a file called
“large_facets.h5m” with a faceting tolerance of 1.e-5, use</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>CUBIT&gt; export dagmc &quot;large_facets.h5m&quot; faceting_tolerance 1.e-5
</pre></div>
</div>
</section>
</section>
<section id="roadmap-for-the-future">
<h2>Roadmap for the future<a class="headerlink" href="#roadmap-for-the-future" title="Permalink to this heading">¶</a></h2>
<p>Currently we have a number of standalone command line tools that are run sequentially
on a model following faceting using Cubit. We run <cite>make_watertight</cite> to seal
models to ensure no topological weaknesses exist and we run <cite>uwuw_preproc</cite> to add
materials into analysis geometries. It is envisioned that at some point in the
near future that we will integrate these as options within the Cubit plugin.</p>
<a class="reference internal image-reference" href="../_images/plugin_infrastructure.png"><img alt="The future infrastructure for the Cubit plugin" src="../_images/plugin_infrastructure.png" style="width: 800px; height: 350px;" /></a>
<p>This will allow you to add additional options if you want the model to be made
watertight and/or if you want to add materials to the resultant geometry. There will
always be power users that prefer the command line tools. These tools will continue
to be supported with identical infrastructure.</p>
</section>
</section>


          </div>
      </div>

    </div>
</div>
    <div id="footer">
      <p>
        &copy; Copyright 2012-2020, The UW CNERG Team.
      </p>
      <p>
      Last updated on Aug 02, 2022.
      </p>
      <p>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 5.0.1.
      </p>
    </div>
  </body>
</html>